# GEAgent 项目前端

## 一、智能对话体验
### 1 回合式聊天设计
- **回合分组机制**：每组对话被赋予唯一的 `groupId`，同时使用 `round` 属性标记回合序号
- **视觉层次分离**：不同回合之间通过50px的垂直间距创建明显分隔
- **圆角样式差异化**：回合起始消息采用完整圆角，中间消息无上圆角或下圆角，形成视觉连贯性
- **背景色区分**：AI消息区块使用浅色背景，用户消息保持透明背景，增强对比度
- **回合开始标记**：每个新回合的第一条消息添加 `round-start` 类，应用特殊样式

### 2 思考过程可视化
- **专用消息类型**：创建 `thinking` 角色的特殊消息类型，与常规用户和AI消息区分
- **独特视觉样式**：思考消息使用较浅的背景色(#F1EDED)和灰色文本(#999999)，视觉上与正式回复区分
- **渐进式展示**：思考内容流式显示，模拟AI真实思考过程，提高交互真实感
- **与回复的视觉连贯**：思考消息与后续AI回复在视觉上形成连贯，底部无圆角过渡到回复
- **Markdown渲染**：思考内容支持Markdown格式化，可展示结构化思考过程

### 3 技术栈

#### Vue 3: 使用组合式API和响应式系统处理对话状态
- 响应式数据绑定和组件化结构
- 计算属性实现模型参数更改的实时响应
- 条件渲染只在激活相应模型时渲染特定参数设置

#### Ant Design Vue: 提供头像(a-avatar)等基础UI组件
- 提供工具提示组件和滑块组件
- 弹出层和模态框实现复杂交互
- 表单控件增强用户输入体验

#### Pinia: 状态管理库，管理对话数据和模型参数
- 使用`mapWritableState`从store获取和更新模型参数
- 参数持久化使用本地存储缓存用户偏好设置
- 集中管理应用状态，避免组件间复杂的数据传递

#### 渲染与样式
##### MarkdownIt + highlight.js: 思考过程和回复的Markdown渲染及代码高亮
- 支持代码块语法高亮
- 自定义渲染规则增强展示效果
- 安全处理用户输入内容

#### 通信与数据处理
##### Fetch API + 流式响应: 使用流式处理实时接收服务器推送的思考过程
- 流式处理实现实时显示生成内容
- 处理异步API调用，简化代码结构
- 优雅处理异步错误，确保用户体验连贯

##### TextDecoder: 解码服务器返回的流式文本数据
- 解码流式UTF-8文本数据
- 处理分块接收的服务器响应
- 支持流式数据拼接和处理

##### Axios: HTTP 请求库
- **统一请求配置**: 配置请求拦截器，统一处理认证信息和请求头
- **响应拦截处理**: 统一处理响应状态，包括错误处理和数据转换
- **请求重试机制**: 针对网络错误自动重试，提高请求可靠性
- **取消请求支持**: 支持取消重复请求，优化性能和用户体验

## 二、自适应布局设计
### 1 响应式侧边栏
- **智能折叠与展开机制**：移动设备上自动折叠节省空间
- **差异化宽度策略**：小屏占据70%，大屏占15%，保持比例协调
- **半透明遮罩层**：增强焦点感并提供便捷收起方式

### 2 组件显示的智能切换
- **基于屏幕空间的组件重组**：小屏幕隐藏次要功能，通过浮层展示
- **层级交互优化**：移动设备注重主要功能，简化操作流程

### 3 技术栈
- **CSS Flexbox**: 构建灵活的自适应布局
- **CSS Grid**: 管理复杂的二维网格布局（部分区域）
- **Media Queries**: 基于断点切换不同设备布局样式
- **Viewport Units**: 使用vw/vh单位创建与视口相关的尺寸

## 三、个性化设置体验
### 1 模型参数可视化调整
- **直观滑块控制**：使用滑块组件替代传统数字输入，使参数调整更加直观
- **即时反馈机制**：参数调整实时生效，用户可立即感知变化
- **参数范围智能限制**：每个参数都有合理的取值范围和步进值，避免误操作
- **解释性提示**：每个参数旁配有工具提示，解释参数含义及其对结果的影响
- **视觉标识系统**：清晰易懂且具有亲和力

### 2 场景预设功能
- **情境化参数组合**：根据不同使用场景(创意文本、问答系统等)提供优化的参数集
- **一键切换**：单击即可应用整套参数配置，无需逐一调整
- **情境说明**：每个预设都附带简短描述，帮助用户理解适用场景
- **分类组织**：通过弹出面板组织多个预设，减少UI复杂度
- **视觉差异化**：预设选项在悬停和选中时有明显的视觉反馈

### 3 技术栈
#### 前端框架与UI库
- **Vue 3**: 使用组合式API构建响应式UI
- **Ant Design Vue**: 提供高质量UI组件(滑块、头像、提示、弹出层等)
- **Pinia**：状态管理库，实现数据的集中管理和持久化

## 四、性能优化设计
### 1 资源预加载系统
- **自定义预加载管理器**：实现了专用的资源预加载服务(preloader.ts)，统一管理所有关键资源
- **资源优先级设置**：区分关键资源和非关键资源，确保最重要的UI元素优先加载
- **加载状态反馈**：为用户提供资源加载进度的视觉反馈，提升等待体验
- **资源缓存管理**：已加载资源保持在内存中，确保应用内切换页面时瞬时响应
- **按需调用模式**：组件可通过统一接口按需获取预加载资源，避免资源使用错误

### 2 分页加载历史记录
- **虚拟滚动实现**：只渲染可视区域的历史记录，大幅减少DOM节点数量
- **滚动触发阈值优化**：提前触发加载，用户无感知
- **状态指示系统**：加载过程中显示适当反馈，避免用户重复触发
- **批量加载策略**：每次加载固定数量(20条)记录，平衡网络请求频率和数据量
- **排序和记忆**：保持最新加载的条目与已有条目的正确排序和状态

## 五、流畅的视觉交互
- **渐变风格按钮设计**
- **平滑过渡动画体系**
- **精心设计的加载动画**
- **模态框与弹出层效果**

### 1 响应式侧边栏
- **移动设备上的侧边栏经过特殊优化，提供浮动式交互体验**

### 2 技术栈实现
#### 核心前端框架
- **Vue 3**: 项目基于Vue 3构建，利用其反应性系统实现高效的DOM更新
- **Vue Router**: 处理路由导航和页面转换

#### 样式与组件系统
- **Ant Design Vue**: 提供基础UI组件如a-layout, a-avatar, a-popover等
- **自定义CSS**: 大量使用CSS3特性，包括渐变、过渡和变换
- **Tailwind CSS**: 用于快速构建响应式布局(如w-full, h-full类)

#### 状态管理

- **Pinia**: Vue状态管理库，用于管理用户、模型和对话状态
- **mapWritableState API**实现双向绑定模型参数

####  动画系统
- **GSAP (GreenSock Animation Platform)**：强大的动画库，用于实现复杂的动画序列 

#### 资源优化
- **自定义预加载系统**：preloader.ts服务确保关键资源在使用前加载完成